This task is to resolve a deadlock issue in the `echo` server, which currently uses non-async primitives.
Follow the `TODO` comments in the code.